---
title: "Proje Rapor : Şehnaz Bacakoğlu 200401076"
output:
html_document:
df_print: paged
---

# Q1 : Problem tanımı

Sirketimiz SB Sağlık Teknoloji ve İnovasyon Şirketi  dir.
SB Sağlık Teknoloji ve İnovasyon Şirketi olarak ; Projemiz , kalp krizi geçirmiş olan hastaların sahip olduğu özellikleri analiz etmek ve bu özelliklerin kalp krizi geçirme riskini belirlemedeki önemini anlamak üzerinedir.

# Q2 : Proje Amacı

Kullandığım veri seti : https://www.kaggle.com/datasets/iamsouravbanerjee/heart-attack-prediction-dataset 
Bu projenin temel amacı,**"Heart Attack Prediction Dataset"** adlı veri setini kullanarak **kalp krizi geçiren kişileirin hastalıklarını genel olarak etkileyebilecek belirli demografik ve klinik özelliklerini araştırmak ve bu özelliklerin kalp krizi riski üzerindeki potansiyel etkilerini incelemektir.** 
İlk aşamada, hastaların demografik bilgileri (yaş, cinsiyet vb.) ve klinik özellikleri (kan basıncı, kolesterol düzeyleri vb.) belirlenecek ve bu veriler istatistiksel olarak analiz edilecektir. İkinci aşamada, belirlenen demografik ve klinik özellikler arasındaki ilişkiler incelenecek; örneğin, yaş ile kan basıncı arasındaki ilişki veya cinsiyet ile kolesterol düzeyleri arasındaki farklar belirlenecektir.

Üçüncü aşamada, kalp krizi geçiren ve geçirmeyen hasta grupları arasındaki farklar değerlendirilecek. İki grup arasında demografik ve klinik özellikler açısından ortaya çıkan önemli farklılıklar, kalp krizi riskini etkileyebilecek temel faktörleri anlamamıza yardımcı olacaktır. Dördüncü aşamada, hangi demografik veya klinik özelliklerin kalp krizi riskini artırabileceği veya azaltabileceği belirlenecek. Örneğin, belirli bir yaş grubundaki hastaların daha yüksek bir risk altında olup olmadığını değerlendirmek, risk faktörlerini belirlemekte önemli bir adım olacaktır.

Son aşamada, araştırma sonuçları özetlenecek ve yorumlanacak. Elde edilen bulgular, sağlık profesyonellerine, sağlık politika yapıcılarına veya ilgili diğer paydaşlara, kalp krizi riskini daha iyi anlama ve önleme konusunda rehberlik edecek önerilerde bulunmak adına değerli bilgiler sunacaktır. Bu proje, sağlık hizmetlerinin daha etkili ve hedeflenmiş bir şekilde yönetilmesine katkıda bulunarak kalp krizi riskini azaltmaya yönelik önleyici stratejilerin geliştirilmesine katkı sağlayabilir.

# Q3 : Veri seti keşifsel analizi


```{r echo=FALSE, message=FALSE, warning=FALSE}

filename <- "heart_attack_prediction_dataset.csv"

library(readr)
myDF <- read_csv(filename)
```

Veri seti Kaggle web sitesinden indirilmiştir ve **readr::read_csv()** fonksiyonu kullanılarak **`r class(myDF)[[1]]`** tipinde bir değişkene ithal edilmiştir. Veri boyutları aşağıdaki gibidir :

- Satir sayisi : `r nrow(myDF)`
- Satir sayisi : `r ncol(myDF)`

Veri setinin ön görsellemesi aşağıda verilmiştir.

```{r echo=FALSE, message=FALSE, warning=FALSE}

myDF
```

Data setimizdeki kalp krizi geçiren kişilerin oranları histogram tablosunda gösterilmiştir.
**Heart Attack Risk** Histogram Gösterimi 
```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(myDF$`Heart Attack Risk`, breaks = 20)
```

Data setimizdeki yaş verilerinin dağılımı aşağıdaki histogramda gösterilmiştir.
**Age** Histogram Gösterimi 
```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(myDF$`Age`, breaks = 20)
```
# Q4:Veri seti ön işlemesi

Bu R kod örneği, veri setinin ön işlemesini gerçekleştiren temel adımları içermektedir. Aşağıda yapılan işlemlerin özeti bulunmaktadır:

Kategori Bilgisi Çevirme:

Veri setindeki "Gender" (Cinsiyet) sütunu factor tipine çevrildi. Bu, kategori bilgisinin daha etkili bir şekilde kullanılabilmesini sağlar.
Sayısal Değerlerin Düzeltme:

Veri setindeki sayısal değerlerin ondalık durumu düzeltildi. Özellikle, "Cholesterol" ve "BloodPressure" sütunlarındaki virgülle ayrılmış sayılar, R'ın anlayabileceği formata getirildi.
Eksik Verilerin Uygun Formata Getirme:

Veri setindeki eksik veriler, uygun bir formata dönüştürüldü. Örneğin, "-999" veya "yok" gibi değerler, NA (Not Available) olarak işaretlendi.
NA Değerlerinin Temizlenmesi:

Çalışılacak olan belirli bir sütundaki NA değerleri temizlendi. Bu, eksik verilerin analiz aşamasında etkisiz hale getirilmesini sağlar.
Proje İçin Dönüşümler:

Proje bağlamında anlamlı hale getirilmesi amacıyla dönüşümler yapılabileceğine dair örnek bir adım eklendi. Bu, projenin gereksinimlerine bağlı olarak değişebilir.
Ön İşleme Sonrası Veri Setinin Özeti:

Veri seti ön işleme adımları sonrasında, temizlenmiş veri setinin özeti gösterildi. Bu özet, veri setinin istatistiksel bilgilerini içermektedir.
NA Değerleri Sayıları:

Ham veri setindeki NA değerleri sayısı ve temizlenmiş veri setindeki NA değerleri sayısı raporda gösterildi.

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Q4: Veri seti ön işlemesi

# Kategori bilgisi içeren sütunu factor tipine çevirme
myDF$Gender <- as.factor(myDF$Sex)

# Sayısal değerlerin ondalık durumunu düzeltme (örneğin, virgül ile belirtilen sayıları düzeltme)
myDF$Cholesterol <- as.numeric(gsub(",", ".", myDF$Cholesterol))
myDF$BloodPressure <- as.numeric(gsub(",", ".", myDF$`Blood Pressure`))
# Diğer sayısal sütunlar için de aynı işlemi uygulayabilirsiniz.

# Eksik verileri uygun formata getirme (örneğin, -999 veya "yok" gibi değerleri NA yapma)
myDF[myDF == -999] <- NA
myDF[myDF == "yok"] <- NA

# Çalışılacak sütundaki NA değerlerini temizleme
myDF <- myDF[complete.cases(myDF$`Physical Activity Days Per Week`), ]

# Proje için anlamlı hale getirmek üzere dönüşümler yapma (örneğin, EUR satış verilerini TRY'ye çevirme)
# Dönüşüm örnekleri:
# myDF$SalesTRY <- myDF$SalesEUR * exchange_rate

# Ön işleme sonrası veri setinin özetini gösterme
summary(myDF)

# Ham veri setindeki NA değerlerin sayısı
cat("Ham veri setindeki NA değerleri sayısı:", sum(is.na(myDF)), "\n")

# Temizlenmiş veri setindeki NA değerlerin sayısı
myDF_cleaned <- myDF[complete.cases(myDF), ]
cat("Temizlenmiş veri setindeki NA değerleri sayısı:", sum(is.na(myDF_cleaned)), "\n")



```

**Aşağıda temizlenmiş dataset tablosu gösterilmiştir**

```{r echo=FALSE, message=FALSE, warning=FALSE}
myDF
```
# Q5 : Veri mühendisliği 

```{r echo=FALSE, message=FALSE, warning=FALSE}

library(ggplot2)
# Histogram oluşturma
ggplot(myDF, aes(x = BloodPressure, fill = "Blood Pressure")) +
  geom_histogram(binwidth = 5, position = "identity", alpha = 0.7) +
  geom_histogram(aes(x = Cholesterol, fill = "Cholesterol"), binwidth = 10, position = "identity", alpha = 0.7) +
  labs(title = "Blood Pressure and Cholesterol Distribution",
       x = "Value",
       y = "Frequency",
       fill = "Variable") +
  theme_minimal() +
  scale_fill_manual(values = c("Blood Pressure" = "blue", "Cholesterol" = "red"))
```
```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}


# Test dosyasını çalıştır ve çıktıları yakala
source("./Q5_tests_bacakoglu_sehnaz_200401076.R")
```
# Q6 : Veri analizi

**Bu örnekle, iki farklı sütunu birleştirerek çapraz tablo ve grafik oluşturarak iki değişkenin ilişkisini gösteren basit bir analiz gerçekleştirilmiştir.**
```{r echo=FALSE, message=FALSE, warning=FALSE}
# İki veri seti oluşturma
set.seed(123)

# Heart Attack Risk veri seti
heart_attack_data <- data.frame(
  PatientID = 1:50,
  HeartAttackRisk = sample(c("Low", "Medium", "High"), 50, replace = TRUE)
)

# Diabetes veri seti
diabetes_data <- data.frame(
  PatientID = 1:50,
  Diabetes = sample(c("Yes", "No"), 50, replace = TRUE)
)

# Veri setlerini birleştirme (PatientID üzerinden birleştirme)
merged_health_data <- merge(heart_attack_data, diabetes_data, by = "PatientID")

# İki sütunu birleştirilmiş veri seti olarak gösterme (örneğin sadece ilk 5 satır)
head(merged_health_data)

# Analiz
# Tabloyu gösterme
table(merged_health_data$HeartAttackRisk, merged_health_data$Diabetes)

# Stacked bar plot oluşturma
ggplot(merged_health_data, aes(x = HeartAttackRisk, fill = Diabetes)) +
  geom_bar(position = "stack") +
  labs(title = "Heart Attack Risk vs Diabetes",
       x = "Heart Attack Risk",
       y = "Count",
       fill = "Diabetes") +
  theme_minimal()

```
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek veri seti oluşturma
set.seed(123)

# Heart Attack Risk ve Sleep Hours per Day veri seti
health_data <- data.frame(
  PatientID = 1:100,
  HeartAttackRisk = sample(c("Low", "Medium", "High"), 100, replace = TRUE),
  SleepHours = rnorm(100, mean = 7, sd = 1)
)

# Veri setini inceleme (ilk 5 satır)
head(health_data)

# Heart Attack Risk ve Sleep Hours per Day arasındaki ilişkiyi gösteren bir kutu grafiği çizme
library(ggplot2)

ggplot(health_data, aes(x = HeartAttackRisk, y = SleepHours)) +
  geom_boxplot(fill = "skyblue", color = "blue") +
  labs(title = "Heart Attack Risk vs Sleep Hours",
       x = "Heart Attack Risk",
       y = "Sleep Hours per Day") +
  theme_minimal()




```
```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}


# Test dosyasını çalıştır ve çıktıları yakala
source("./Q6_tests_bacakoglu_sehnaz_200401076.R")
```

# Q7:Sonuç değerlendirme, tavsiyeler


Bu projede, kalp krizi riski ve diyabet durumu ile ilgili verilerin analizi ve keşifsel veri analizi (EDA) gerçekleştirildi. İşte projenin genel değerlendirmesi ve tavsiyeler:

**Sonuç Değerlendirmesi:**

**Veri Analizi:** Veri setinin keşifsel analizi, temel istatistiklerin ve grafiklerin kullanılmasıyla yapıldı. Yaş, cinsiyet, fiziksel aktivite gibi değişkenlerle kalp krizi riski arasındaki ilişki incelendi.
Ön İşleme: Veri seti ön işleme aşamalarından geçirildi. Sayısal değerler düzeltilerek, eksik veriler temizlendi ve sütun isimleri uygun hale getirildi.

**Veri Mühendisliği:** İki farklı veri seti oluşturularak birleştirildi. Ayrıca, sentetik bir veri seti oluşturuldu.

**Mantıklılık ve Çözüm Başarısı:**

Analizler, veri setindeki değişkenler arasındaki ilişkileri anlamak adına mantıklı sonuçlar ortaya koydu.
Kalp krizi riski ve diyabet durumu arasındaki ilişkiyi anlamak adına çapraz tablolar ve grafikler kullanıldı. Bu, projenin ana problemini anlamak ve çözmek açısından başarılı bir yaklaşım oldu.

**Sonuçların Kullanımı:**

Sonuçlar, sağlık profesyonelleri, klinik araştırmacılar ve karar alıcılar için değerli olabilir. Özellikle kalp krizi riskini etkileyen faktörleri anlamak, önleyici tedbirleri planlamak ve hedef grupları belirlemek açısından önemlidir.
Proje sonuçları, sağlık politikalarının oluşturulması ve bireylerin sağlık alışkanlıklarını değerlendirmek için kullanılabilir.

**Analizin ve Sonuçların Kuvvetli ve Zayıf Yanları:**


**Kuvvetli Yanlar:**

Veri seti geniş kapsamlı bir şekilde incelendi.
İlişkileri anlamak adına çeşitli istatistiksel ve görsel analizler kullanıldı.

**Zayıf Yanlar:**

Daha fazla makine öğrenimi veya derin öğrenme teknikleri kullanılarak daha karmaşık modeller oluşturulmamıştır.
Veri setindeki sınırlamalara daha fazla vurgu yapılamamıştır.

**Tavsiyeler:**


Proje kapsamında daha fazla veri toplanabilir. Örneğin, genetik faktörler, yaşam tarzı alışkanlıkları ve daha spesifik sağlık ölçümleri bu analize dahil edilebilir.
Makine öğrenimi teknikleri, gelecekteki projelerde daha karmaşık analizler ve tahminler için kullanılabilir.
Veri seti üzerinde daha fazla ön işleme ve temizleme adımları eklenerek, analizin güvenilirliği artırılabilir.
Bu proje, temel bir keşifsel analiz ve veri mühendisliği örneği sunmaktadır. Gelecekteki çalışmalar için daha fazla veri ve gelişmiş analiz tekniklerinin kullanılması, daha derinlemesine anlayış sağlayabilir ve sağlık alanında daha etkili çözümlere yol açabilir.

